<ng-template #rangeTemplate let-range="range" let-total>
  {{ range[0] }}-{{ range[1] }} of {{ total }} items
</ng-template>

<nz-table
  nzSize="small"
  nzShowPagination="true"
  nzHideOnSinglePage="true"
  [nzShowTotal]="rangeTemplate"
  #editRowTable nzBordered [nzData]="attributes">
  <thead>
  <tr>
    <th nzWidth="30%">Name</th>
    <th>Value</th>
    <th>Type</th>
    <th class="th-actions">Action <button nz-button nzType="primary" nzSize="small" nzShape="circle"
                       nzTooltipTitle="Add attribute"
                       nzTooltipPlacement="right"
                       nz-tooltip
                       (click)="addRow()"><span nz-icon nzType="plus"></span></button></th>
  </tr>
  </thead>
  <tbody>
  <tr *ngFor="let data of editRowTable.data">
    <ng-container *ngIf="!editCache[data.id].edit; else editTemplate">
      <td>{{ data.name }}</td>
      <td>{{ data.valueAsString }}</td>
      <td>{{ data.type }}</td>
      <td>
        <button
          nz-button
          nzType="link"
          nzSize="small"
          nzTooltipTitle="Edit"
          nzTooltipPlacement="top"
          nz-tooltip
          (click)="startEdit(data.id)"
        >
          <span nz-icon nzType="edit" nzTheme="outline"></span>
        </button>
        <button nz-button nzType="link" nzSize="small"
                nzTooltipTitle="Delete attribute"
                nzTooltipPlacement="top"
                nz-tooltip
                nz-popconfirm nzPopconfirmTitle="Sure to delete?" (nzOnConfirm)="deleteRow(data.id)">
          <span nz-icon nzType="delete" nzTheme="outline"></span></button>
      </td>
    </ng-container>
    <ng-template #editTemplate>
      <td><input type="text" nz-input [(ngModel)]="editCache[data.id].data.name" /></td>
      <td><input type="text" nz-input [(ngModel)]="editCache[data.id].data.valueAsString" /></td>
      <td><input type="text" nz-input [(ngModel)]="editCache[data.id].data.type" /></td>
      <td>
        <button
          nz-button
          nzType="link"
          nzSize="small"
          nzTooltipTitle="Save"
          nzTooltipPlacement="top"
          nz-tooltip
          (click)="saveEdit(data.id)">
          <span nz-icon nzType="check" nzTheme="outline"></span>
        </button>
        <button
          nz-button
          nzType="link"
          nzSize="small"
          nzTooltipTitle="Cancel"
          nzTooltipPlacement="top"
          nz-tooltip
          nz-popconfirm nzPopconfirmTitle="Sure to cancel?" (nzOnConfirm)="cancelEdit(data.id)">
          <span nz-icon nzType="stop" nzTheme="outline"></span>
        </button>
      </td>
    </ng-template>
  </tr>
  </tbody>
</nz-table>
